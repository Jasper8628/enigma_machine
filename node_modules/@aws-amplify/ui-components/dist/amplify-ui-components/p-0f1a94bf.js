import{e}from"./p-2915ed18.js";import{Storage as t}from"@aws-amplify/storage";const r=new Set(["apng","bmp","gif","ico","cur","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"]),o=(e,t)=>{const{name:r,size:o,type:a}=e;let n=encodeURI(r);return t&&(n="string"==typeof t?t:"function"==typeof t?t({name:r,size:o,type:a}):encodeURI(JSON.stringify(t)),n||(n="empty_key")),n.replace(/\s/g,"_")},a=async(r,o,a,n,i)=>{if(!t||"function"!=typeof t.get)throw new Error(e);try{const e=await t.get(r,{level:o,track:a,identityId:n});return i.debug("Storage image get",e),e}catch(c){throw new Error(c)}},n=async(r,o,a,n,i)=>{if(!t||"function"!=typeof t.get)throw new Error(e);try{const e=await t.get(r,{download:!0,level:o,track:a,identityId:n});return i.debug(e),await(c=e.Body,new Promise((e,t)=>{let r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=()=>{t("Failed to read file!"),r.abort()},r.readAsText(c)}))}catch(p){throw new Error(p)}var c},i=async(r,o,a,n,i,c)=>{if(!t||"function"!=typeof t.put)throw new Error(e);try{const e=await t.put(r,o,{contentType:i,level:a,track:n});c.debug("Upload data",e)}catch(p){throw new Error(p)}};export{n as a,o as c,a as g,r as i,i as p}